
/**
 * @file font.c
 */
#include "font.h"

#include <stdio.h>

/// Буфер с бинарным представлением символов
const uint8_t bitmap[NUMBER_OF_SYMBOLS][NUMBER_OF_ROWS] = {

    // Символ 0
    [SYMBOL_0] = {0B00000000, 0B01111100, 0B10000010, 0B10000010, 0B10000010,
                  0B01111100},

    // Символ 1
    [SYMBOL_1] = {0B00000000, 0B00000000, 0B00000010, 0B11111110, 0B01000010,
                  0B00000000},

    // Символ 2
    [SYMBOL_2] = {0B00000000, 0B01100010, 0B10010010, 0B10001010, 0B10000110,
                  0B01000010},

    // Символ 3
    [SYMBOL_3] = {0B00000000, 0B10001100, 0B11010010, 0B10100010, 0B10000010,
                  0B10000100},

    // Символ 4
    [SYMBOL_4] = {0B00000000, 0B00001000, 0B11111110, 0B01001000, 0B00101000,
                  0B00011000},

    // Символ 5
    [SYMBOL_5] = {0B00000000, 0B10011100, 0B10100010, 0B10100010, 0B10100010,
                  0B11100100},

    // Символ 6
    [SYMBOL_6] = {0B00000000, 0B01001100, 0B10010010, 0B10010010, 0B10010010,
                  0B01111100},

    // Символ 7
    [SYMBOL_7] = {0B00000000, 0B11000000, 0B10100000, 0B10011110, 0B10000000,
                  0B10000000},

    // Символ 8
    [SYMBOL_8] = {0B00000000, 0B01101100, 0B10010010, 0B10010010, 0B10010010,
                  0B01101100},

    // Символ 9
    [SYMBOL_9] = {0B00000000, 0B01111100, 0B10010010, 0B10010010, 0B10010010,
                  0B01100100},

    // Двойная стрелка вверх
    [SYMBOL_ARROW_UP] = {0B00000000, 0B00100000, 0B01111110, 0B11000000,
                         0B01111110, 0B00100000},

    // Двойная стрелка вниз
    [SYMBOL_ARROW_DOWN] = {0B00000000, 0B00001000, 0B11111100, 0B00000110,
                           0B11111100, 0B00001000},

    // Двойная стрелка вверх-вниз
    [SYMBOL_ARROW_BOTH] = {0B00000000, 0B00101000, 0B01111100, 0B11000110,
                           0B01111100, 0B00101000},

    // // Символ A
    // [SYMBOL_A] = {0b00110000, 0b01001000, 0b01001000, 0b01111000, 0b01001000,
    //               0b01001000, 0b01001000, 0b01001000},

    // // Символ b
    // [SYMBOL_b] = {0b01000000, 0b01000000, 0b01000000, 0b01110000, 0b01001000,
    //               0b01001000, 0b01001000, 0b01110000},

    // Символ C
    [SYMBOL_C] = {0B00000000, 0B01000100, 0B10000010, 0B10000010, 0B10000010,
                  0B01111100},

    // // Символ d
    // [SYMBOL_d] = {0B00001000, 0B00001000, 0B00001000, 0B00111000, 0B01001000,
    //               0B01001000, 0B01001000, 0B00111000},

    // Символ E
    [SYMBOL_E] = {0B00000000, 0B10000010, 0B10010010, 0B10010010, 0B10010010,
                  0B11111110},

    // Символ F
    [SYMBOL_F] = {0B00000000, 0B10000000, 0B10010000, 0B10010000, 0B11111110,
                  0B00000000},

    // Символ Пусто
    [SYMBOL_EMPTY] = {0B00000000, 0B00000000, 0B00000000, 0B00000000,
                      0B00000000, 0B00000000},

    // Символ П
    [SYMBOL_UNDERGROUND_FLOOR_BIG] = {0B00000000, 0B11111110, 0B10000000,
                                      0B10000000, 0B10000000, 0B11111110},

    // Символ P
    [SYMBOL_P] = {0B00000000, 0B01110000, 0B10001000, 0B10001000, 0B10001000,
                  0B11111110},

    // // Символ п
    // [SYMBOL_UNDERGROUND_FLOOR_SMALL] = {0B00000000, 0B00000000, 0B00000000,
    //                                     0B01111000, 0B01001000, 0B01001000,
    //                                     0B01001000, 0B01001000},

    // Символ H
    [SYMBOL_H] = {0B00000000, 0B11111110, 0B00010000, 0B00010000, 0B00010000,
                  0B11111110},

    // Символ U
    [SYMBOL_U_BIG] = {0B00000000, 0B11111100, 0B00000010, 0B00000010,
                      0B00000010, 0B11111100},

    // Символ - (минус)
    [SYMBOL_MINUS] = {0B00000000, 0B00000000, 0B00010000, 0B00010000,
                      0B00010000, 0B00000000},

    // // Символ _
    // [SYMBOL_UNDERSCORE] = {0B00000000, 0B00000000, 0B00000000, 0B00000000,
    //                        0B00000000, 0B00000000, 0B00000000, 0B01111000},

    // // Символ u
    // [SYMBOL_U_SMALL] = {0B00000000, 0B00000000, 0B00000000, 0B01001000,
    //                     0B01001000, 0B01001000, 0B01001000, 0B00110000},

    // Символ L
    [SYMBOL_L] = {0B00000000, 0B00000110, 0B00000010, 0B00000010, 0B00000010,
                  0B11111110},

    // // Символ У
    // [SYMBOL_Y_RU] = {0B01001000, 0B01001000, 0B01001000, 0B01001000,
    // 0B00111000,
    //                  0B00001000, 0B01001000, 0B00110000},

    // // Символ Б
    // [SYMBOL_b_BIG_RU] = {0B01111000, 0B01000000, 0B01000000, 0B01110000,
    //                      0B01001000, 0B01001000, 0B01001000, 0B01110000},

    // Символ Г
    [SYMBOL_G_RU] = {0B00000000, 0B10000000, 0B10000000, 0B10000000, 0B10000000,
                     0B11111110},

    // // Символ R
    // [SYMBOL_R] = {0B01110000, 0B01001000, 0B01001000, 0B01001000, 0B01110000,
    //               0B01100000, 0B01010000, 0B01001000},

    // // Символ V
    // [SYMBOL_V] = {0b01000100, 0b01000100, 0b01000100, 0b01000100, 0b01000100,
    //               0b01000100, 0b00101000, 0b00010000},

    // // Символ N
    // [SYMBOL_N] = {0B01000100, 0B01000100, 0B01000100, 0B01100100, 0B01010100,
    //               0B01001100, 0B01000100, 0B01000100},

    // // Символ S
    // [SYMBOL_S] = {0b00110000, 0b01001000, 0b01000000, 0b00100000, 0b00010000,
    //               0b00001000, 0b01001000, 0b00110000},

    // Символ K
    [SYMBOL_K] = {0B00000000, 0B10000010, 0B01000100, 0B00101000, 0B00010000,
                  0B11111110},

    // // Символ Y
    // [SYMBOL_Y] = {0B01000100, 0B01000100, 0B01000100, 0B00101000, 0B00010000,
    //               0B00010000, 0B00010000, 0B00010000},

    // // Символ G
    // [SYMBOL_G] = {0B00111000, 0B01000100, 0B01000000, 0B01000000, 0B01011100,
    //               0B01000100, 0B01000100, 0B00111000},

    // // Символ B
    // [SYMBOL_B] = {0B01110000, 0B01001000, 0B01001000, 0B01110000, 0B01001000,
    //               0B01001000, 0B01001000, 0B01110000},

    // // Символ T
    // [SYMBOL_T] = {0b01111100, 0b00010000, 0b00010000, 0b00010000, 0b00010000,
    //               0b00010000, 0b00010000, 0b00010000},

    // // Символ I
    // [SYMBOL_I] = {0b01110000, 0b00100000, 0b00100000, 0b00100000, 0b00100000,
    //               0b00100000, 0b00100000, 0b01110000},

    // // Символ D
    // [SYMBOL_D] = {0b01110000, 0b01001000, 0b01001000, 0b01001000, 0b01001000,
    //               0b01001000, 0b01001000, 0b01110000},

    // // Символ +
    // [SYMBOL_PLUS] = {0b00000000, 0b00010000, 0b00010000, 0b01111100,
    // 0b00010000,
    //                  0b00010000, 0b00000000, 0b00000000},

    // Символ .
    [SYMBOL_DOT] = {0b00000000, 0b00000000, 0b00000010, 0b00000000, 0b00000000,
                    0b00000000},

    // // Символ Включить все точки (для DEMO_MODE)
    // [SYMBOL_ALL_ON] = {0B11111111, 0B11111111, 0B11111111, 0B11111111,
    //                    0B11111111, 0B11111111, 0B11111111, 0B11111111},

};

#if 0
/**
 * @file font.c
 */
#include "config.h"
#include "font.h"

#include <stdio.h>
#include <string.h>

#define START_BIT_INDEX_FONT 6 ///< Start index for element of symbols[]

/**
 * Stores the parameters of the symbol: symbol and binary_symbol massive
 */
typedef struct {
  char symbol;
  uint8_t buff_code[BINARY_SYMBOL_SIZE];
} symbol_t;

#if DOT_PIN
/// Massive of symbols
symbol_t symbols[] = {
    {'c',
     {// clear
      0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000,
      0b00000000, 0b00000000}},
    {'>',
     {// up
      0b00010000, 0b00111000, 0b01010100, 0b00010000, 0b00010000, 0b00010000,
      0b00010000, 0b00010000}},
    {'<',
     {// down
      0b00010000, 0b00010000, 0b00010000, 0b00010000, 0b00010000, 0b01010100,
      0b00111000, 0b00010000}},
    {'0',
     {0b00110000, 0b01001000, 0b01001000, 0b01001000, 0b01001000, 0b01001000,
      0b01001000, 0b00110000}},
    {'1',
     {0b00100000, 0b01100000, 0b00100000, 0b00100000, 0b00100000, 0b00100000,
      0b00100000, 0b01110000}},
    {'2',
     {0b00110000, 0b01001000, 0b00001000, 0b00001000, 0b00010000, 0b00100000,
      0b01000000, 0b01111000}},
    {'3',
     {0b01111000, 0b00001000, 0b00010000, 0b00110000, 0b00001000, 0b00001000,
      0b01001000, 0b00110000}},
    {'4',
     {0b00001000, 0b00011000, 0b00101000, 0b01001000, 0b01111000, 0b00001000,
      0b00001000, 0b00001000}},
    {'5',
     {0b01111000, 0b01000000, 0b01000000, 0b01110000, 0b00001000, 0b00001000,
      0b01001000, 0b00110000}},
    {'6',
     {0b00110000, 0b01001000, 0b01000000, 0b01110000, 0b01001000, 0b01001000,
      0b01001000, 0b00110000}},
    {'7',
     {0b01111000, 0b00001000, 0b00001000, 0b00010000, 0b00100000, 0b00100000,
      0b00100000, 0b00100000}},
    {'8',
     {0b00110000, 0b01001000, 0b01001000, 0b00110000, 0b01001000, 0b01001000,
      0b01001000, 0b00110000}},
    {'9',
     {0b00110000, 0b01001000, 0b01001000, 0b01001000, 0b00111000, 0b00001000,
      0b01001000, 0b00110000}},
    {'O',
     {0b00000000, 0b00110000, 0b01001000, 0b01001000, 0b01001000, 0b01001000,
      0b00110000, 0b00000000}},
    {'K',
     {0b01000100, 0b01001000, 0b01010000, 0b01100000, 0b01100000, 0b01010000,
      0b01001000, 0b01000100}},
    {'-',
     {0b00000000, 0b00000000, 0b00000000, 0b01110000, 0b00000000, 0b00000000,
      0b00000000, 0b00000000}},
    {'b',
     {0b01000000, 0b01000000, 0b01000000, 0b01110000, 0b01001000, 0b01001000,
      0b01001000, 0b00110000}},
    {'L',
     {0b01000000, 0b01000000, 0b01000000, 0b01000000, 0b01000000, 0b01000000,
      0b01001000, 0b01111000}},
    {'A',
     {0b00110000, 0b01001000, 0b01001000, 0b01111000, 0b01001000, 0b01001000,
      0b01001000, 0b01001000}},
    {'P',
     {0b01110000, 0b01001000, 0b01001000, 0b01001000, 0b01110000, 0b01000000,
      0b01000000, 0b01000000}},
    {'H',
     {0b01001000, 0b01001000, 0b01001000, 0b01111000, 0b01001000, 0b01001000,
      0b01001000, 0b01001000}},
    {'C',
     {0b00110000, 0b01001000, 0b01000000, 0b01000000, 0b01000000, 0b01000000,
      0b01001000, 0b00110000}},
    {'E',
     {0b01111000, 0b01000000, 0b01000000, 0b01000000, 0b01111000, 0b01000000,
      0b01000000, 0b01111000}},
    {'F',
     {0b01111000, 0b01000000, 0b01000000, 0b01000000, 0b01110000, 0b01000000,
      0b01000000, 0b01000000}},
    {'U',
     {0b01001000, 0b01001000, 0b01001000, 0b01001000, 0b01001000, 0b01001000,
      0b01001000, 0b00110000}},
    {'p', // П
     {0b01111000, 0b01001000, 0b01001000, 0b01001000, 0b01001000, 0b01001000,
      0b01001000, 0b01001000}},
    {'I',
     {0b01110000, 0b00100000, 0b00100000, 0b00100000, 0b00100000, 0b00100000,
      0b00100000, 0b01110000}},
    {'D',
     {0b01110000, 0b01001000, 0b01001000, 0b01001000, 0b01001000, 0b01001000,
      0b01001000, 0b01110000}},
    {'S',
     {0b00110000, 0b01001000, 0b01000000, 0b00100000, 0b00010000, 0b00001000,
      0b01001000, 0b00110000}},
    {'g',
     {// Г
      0b01111000, 0b01000000, 0b01000000, 0b01000000, 0b01000000, 0b01000000,
      0b01000000, 0b01000000}},
    {'+',
     {0b00000000, 0b00010000, 0b00010000, 0b01111100, 0b00010000, 0b00010000,
      0b00000000, 0b00000000}},
    {'V',
     {0b01000100, 0b01000100, 0b01000100, 0b01000100, 0b01000100, 0b01000100,
      0b00101000, 0b00010000}},
    {'T',
     {0b01111100, 0b00010000, 0b00010000, 0b00010000, 0b00010000, 0b00010000,
      0b00010000, 0b00010000}},
    {'.',
     {0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000,
      0b00000000, 0b01000000}},

};

#elif DOT_SPI

/// Massive of symbols
symbol_t symbols[] = {
    {'c',
     {// clear
      0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000}},

#if defined(__ARROW_DOUBLE)
    {'>',

     {// up
      0B00000000, 0B00100000, 0B01111110, 0B11000000, 0B01111110, 0B00100000}

    },

    {'<',
     {// down
      0B00000000, 0B00001000, 0B11111100, 0B00000110, 0B11111100, 0B00001000}},

#elif defined(__ARROW_ORDINAR)
    {'>',
     {// up
      0B00000000, 0B00100000, 0B01000000, 0B11111110, 0B01000000, 0B00100000}},

    {'<',
     {// down
      0B00000000, 0B00001000, 0B00000100, 0B11111110, 0B00000100, 0B00001000}},
#endif /* __ARROW_ORDINAR */

    {'0',
     {
         0B00000000,
         0B01111100,
         0B10000010,
         0B10000010,
         0B10000010,
         0B01111100,
     }},
    {'1',
     {0B00000000, 0B00000000, 0B00000010, 0B11111110, 0B01000010, 0B00000000}},
    {'2',
     {0B00000000, 0B01100010, 0B10010010, 0B10001010, 0B10000110, 0B01000010}},
    {'3',
     {0B00000000, 0B10001100, 0B11010010, 0B10100010, 0B10000010, 0B10000100}},
    {'4',
     {0B00000000, 0B00001000, 0B11111110, 0B01001000, 0B00101000, 0B00011000}},
    {'5',
     {0B00000000, 0B10011100, 0B10100010, 0B10100010, 0B10100010, 0B11100100}},
    {'6',
     {0B00000000, 0B01001100, 0B10010010, 0B10010010, 0B10010010, 0B01111100}},
    {'7',
     {0B00000000, 0B11000000, 0B10100000, 0B10011110, 0B10000000, 0B10000000}},
    {'8',
     {0B00000000, 0B01101100, 0B10010010, 0B10010010, 0B10010010, 0B01101100}},
    {'9',
     {0B00000000, 0B01111100, 0B10010010, 0B10010010, 0B10010010, 0B01100100}},
    {'K',
     {0B00000000, 0B10000010, 0B01000100, 0B00101000, 0B00010000, 0B11111110}},
    {'-',
     {0B00000000, 
      0B00000000, 
      0B00010000, 
      0B00010000, 
      0B00010000, 
      0B00000000}},

    {'A',
     {0B00000000, 0B00000000, 0B01111110, 0B10010000, 0B10010000, 0B01111110}},
    {'P',
     {0B00000000, 0B01110000, 0B10001000, 0B10001000, 0B10001000, 0B11111110}},

    {'C',
     {0B00000000, 0B01000100, 0B10000010, 0B10000010, 0B10000010, 0B01111100}},
    {'E',
     {0B00000000, 0B10000010, 0B10010010, 0B10010010, 0B10010010, 0B11111110}},
    {'F',
     {0B00000000, 0B10000000, 0B10010000, 0B10010000, 0B11111110, 0B00000000}},
    {'p', // П
     {0B00000000, 0B11111110, 0B10000000, 0B10000000, 0B10000000, 0B11111110}},
    {'g',
     {// Г
      0B00000000, 0B10000000, 0B10000000, 0B10000000, 0B10000000, 0B11111110}},
    {'S',
     {0B00000000, 0B01001100, 0B10010010, 0B10010010, 0B10010010, 0B01100100}},
    {'H',
     {0B00000000, 0B11111110, 0B00010000, 0B00010000, 0B00010000, 0B11111110}},
    {'.',
     {0b00000000, 0b00000000, 0b00000010, 0b00000000, 0b00000000, 0b00000000}},

    {'b',
     {0B00000000, 0B00001100, 0B00010010, 0B00010010, 0B00010010, 0B11111110}},
    {'L',
     {0B00000000, 0B00000110, 0B00000010, 0B00000010, 0B00000010, 0B11111110}},
    {'U',
     {0B00000000, 0B11111100, 0B00000010, 0B00000010, 0B00000010, 0B11111100}},
    {'d',
     {0B00000000, 0B10001100, 0B10010010, 0B10010010, 0B10010010, 0B11111110}},
    {'Z',
     {0B00000000, 0B01111100, 0B10010010, 0B10010010, 0B10000010, 0B10000010}},
    // =====================================================================

    {'I',
     {0b01110000, 0b00100000, 0b00100000, 0b00100000, 0b00100000, 0b00100000}},
    {'D',
     {0b01110000, 0b01001000, 0b01001000, 0b01001000, 0b01001000, 0b01001000}},

    {'+',
     {0b00000000, 0b00010000, 0b00010000, 0b01111100, 0b00010000, 0b00010000}},
    {'V',
     {0b01000100, 0b01000100, 0b01000100, 0b01000100, 0b01000100, 0b01000100}},
    {'T',
     {0b01111100, 0b00010000, 0b00010000, 0b00010000, 0b00010000, 0b00010000}},

};

#endif

/**
 * @brief  Convert decimal number to binary
 * @param  number:     Decimal number (code of symbol)
 * @param  binary_mas: Pointer to the binary representation of the symbol
 * @retval None
 */
void convert_number_from_dec_to_bin(uint8_t number, uint8_t *binary_mas,
                                    uint8_t bin_size) {
  int8_t font_index = bin_size;
  uint8_t bit_num = 0;
  while (font_index != -1) {
    binary_mas[bit_num] = number % 2;
    number /= 2;
    font_index--;
    bit_num++;
  }
}

/**
 * @brief  Get code of the symbol from buffer symbols[]
 * @param  symbol:               Symbol from buffer symbols[] (font.c)
 * @retval Pointer to buff_code: Code of symbol
 */
uint8_t *get_symbol_code(char symbol) {
  for (uint8_t ind = 0; ind < sizeof(symbols) / sizeof(symbols[0]); ind++) {
    if (symbols[ind].symbol == symbol) {
      return symbols[ind].buff_code;
    }
  }
  return NULL;
}

#endif
